#!/bin/bash

# MEXC Complete Verification Script
# Tests both IP separation and data collection

echo "üîç MEXC Complete System Verification"
echo "===================================="
echo ""

# First run IP separation test
echo "1Ô∏è‚É£ Testing IP separation..."
./iptest

echo ""
echo "2Ô∏è‚É£ Testing data collection..."

# Activate virtual environment
if [ -f "venv/bin/activate" ]; then
    source venv/bin/activate
    echo "‚úÖ Virtual environment activated"
else
    echo "‚ùå Virtual environment not found. Run ./setup first"
    exit 1
fi

# Set ClickHouse host to localhost for host-side verification
export CLICKHOUSE_HOST=localhost

# Run data verification
echo "üöÄ Running data verification with localhost connection..."
echo ""
python3 verify_data.py

echo ""
echo "üí° Individual test scripts:"
echo "  - IP separation only: ./iptest"
echo "  - Data verification only: ./verif"
echo "  - Complete verification: ./verify (this script)"